<html utf-8>

<head>
    <meta charset="utf-8" />
    <title>あの夏が飽和する</title>
    <link rel="stylesheet" href="res/css/style.css" type="text/css">
    <script type="text/javascript">
        /* ----- option ----- */
        var id = ['p3-1', 'p3-2', 'p3-3', 'p3-4', 'p3-5', 'p3-6', 'p3-7']; //指定するidを全て配列で渡す
        var txSp = 100; // テキストの表示速度
        var dly = 1000; // 次の文章までの待ち時間
        /* ----- option ----- */
        var count = 0;
        var tx = [];
        var txCount = [];

        window.onload = function() {
            kamikakushi();
            countSet();
            itimozi()
        }

        function countSet() { // 文字数カウントの初期設定
            for (n = 0; n < id.length; n++) {
                txCount[n] = 0;
            }
        }

        function kamikakushi() { // 要素をtx[i]に保持させ、非表示にする
            for (i = 0; i < id.length; i++) {
                id[i] = document.getElementById(id[i]);
                tx[i] = id[i].firstChild.nodeValue; // 初期の文字列
                id[i].innerHTML = '';
            }
        }

        function itimozi() { //　一文字ずつ表示させる
            id[count].innerHTML = tx[count].substr(0, ++txCount[count]);
            //+ "_"; // テキストの指定した数の間の要素を表示
            if (tx[count].length != txCount[count]) { // Count が初期の文字列の文字数と同じになるまでループ
                setTimeout("itimozi()", txSp); // 次の文字へ進む
            } else {
                id[count].innerHTML = tx[count].substr(0, ++txCount[count]); // テキストの指定した数の間の要素を表示
                count++; // 次の段落に進む為のカウントアップ
                if (count != id.length) { // id数が最後なら終了
                    setTimeout("itimozi()", dly); // 次の段落へ進む
                }
            }
        }

        // sleep() で（）秒間Sleep
        // ビジーwaitを使う方法
        function sleep(waitMsec) {
            var startMsec = new Date();

            // 指定ミリ秒間だけループさせる（CPUは常にビジー状態）
            while (new Date() - startMsec < waitMsec);
        }

    </script>
</head>

<body>
    <div class="word">
        <div id="p1">
            <p>「昨日人を殺したんだ」</p>
            <br>
            <p>君はそう言っていた。</p>
            <p>梅雨時ずぶ濡れのまんま、部屋の前で泣いていた。</p>
            <br>
            <p>夏が始まったばかりだというのに、</p>
            <p>君はひどく震えていた。</p>
            <br>
            <p>そんな話で始まる、あの夏の記憶だ。</p>

        </div>
        <div id="p2">
            <p>あの夏が飽和する。</p>
        </div>
        <div id="p3">
            <p id="p3-1">「殺したのは隣の席の、いつも虐めてくるアイツ。</p>
            <p id="p3-2">もう嫌になって、肩を突き飛ばして、</p>
            <p id="p3-3">打ち所が悪かったんだ。 </p>
            <p id="p3-4">もうここには居られないと思うし、</p>
            <p id="p3-5">どっか遠いとこで死んでくるよ」</p>
            <p id="p3-6">そんな君に僕は言った。</p>
            <h2 id="p3-7">「それじゃ僕も連れてって」</h2>
        </div>
    </div>
</body>

</html>
